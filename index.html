<html>
  <head>
<style>
  body {
    position: relative;
    font-family: sans-serif;
    font-size: 19px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 80%);
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
  }

  @media (max-width: 1800px) {
    body {
      flex-direction: column;
      align-items: center;
    }
  }

  .content-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    gap: 20px;
  }

  .calculator {
    background: white;
    padding: 2rem;
    border-radius: 15px; 
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 500px;
    border: 2px solid #ff0000;
  }

  .header-logos {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .logo {
    max-width: 150px;
    height: auto;
  }

  .input-group {
    margin-bottom: 1rem;
  }

  label {
    display: block;
    margin-bottom: 0.5rem;
    color: #333;
    font-weight: bold;
  }

  input, select {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 5px;
    margin-bottom: 1rem;
  }

  button {
    background: #ff0000;
    color: white;
    padding: 1rem 2rem;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    width: 100%;
    font-size: 1.1rem;
    transition: background 0.3s;
  }

  button:hover {
    background: #cc0000;
  }

  .result {
    margin-top: 2rem;
    padding: 1rem;
    background: #ff0000;
    border-radius: 5px;
    text-align: center;
    color: white;
  }

  .result h2 {
    color: white;
    margin-bottom: 0.5rem;
  }

  .breakdown {
    text-align: left;
    margin-top: 1rem;
    padding: 1rem;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 5px;
    color: #333;
  }

  .breakdown p {
    margin: 0.5rem 0;
  }

  .total-to-receive {
    font-size: 1.3em;
    font-weight: bold;
    color: #ff0000;
    padding: 1rem;
    border-top: 2px solid #ff0000;
    margin-top: 1rem;
  }

  /* Add calendar styles */
  .calendar {
    background: white;
    padding: 2rem;
    border-radius: 15px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1); 
    width: 100%;
    max-width: 500px;
    margin: 2rem 0 0 0;
    border: 2px solid #ff0000;
  }

  .calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .calendar-header h2 {
    color: #ff0000;
  }

  .calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
  }

  .calendar-day {
    border: 1px solid #ddd;
    padding: 5px;
    text-align: center;
    min-height: 80px;
    background: #fff;
  }

  .calendar-day.holiday {
    background: #ffecec;
  }

  .calendar-day.weekend {
    background: #f5f5f5;
  }

  .day-number {
    font-weight: bold;
    margin-bottom: 5px;
    color: #ff0000;  
  }

  .shift-select {
    width: 100%;
    padding: 2px;
    font-size: 12px;
  }

  .calendar-weekday {
    text-align: center;
    font-weight: bold;
    padding: 5px;
    background: #ff0000;
    color: white;
  }

  .calendar-nav {
    padding: 5px 10px;
    background: #ff0000;
    color: white;
    border: none;
    border-radius: 3px;
    cursor: pointer;
  }

  .calendar-nav:hover {
    background: #cc0000;
  }

  /* Add new style for special days */
  .calendar-day.special-day {
    background: #e6e6fa; /* Lilac color */
  }

  /* Add new style for special October date */
  .calendar-day.october-special {
    background: #ffff99; /* Light yellow */
  }

  /* Add new style for September 8th and August 14th */
  .calendar-day.september-eight {
    background: #90EE90; /* Light green */
  }

  /* Add new style for February 18th */
  .calendar-day.february-special {
    background: #ffffff; /* White */
  }

  /* Add new style for October, November and December special dates */
  .calendar-day.special-pink {
    background: #ffb6c1; /* Light pink */
  }

  /* Add new styles for link section */
  .link-wrapper {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 10px;
  }

  .link-section {
    background: white;
    padding: 2rem;
    border-radius: 15px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 500px;
    margin: 2rem 0;
    text-align: center;
    border: 2px solid #ff0000;
  }

  .link-section a {
    color: #ff0000;
    text-decoration: none;
    font-weight: bold;
  }

  .link-section a:hover {
    text-decoration: underline;
  }

  /* Add watermark styles */
  body::before {
    content: "CC.OO";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    align-items: center;
    font-size: 48px;
    color: rgba(227, 6, 19, 0.1); /* Light red color */
    pointer-events: none;
    z-index: -1;
    transform: rotate(-45deg);
    word-spacing: 3em;
    line-height: 2;
    padding: 20px;
  }
  
  /* Add new style for calendar footer */
  .calendar-footer {
    text-align: center;
    margin-top: 1rem;
    padding: 1rem;
    background: #fff;
    border-top: 2px solid #ff0000;
    font-size: 0.9em;
  }
</style>
</head>
<body style="overflow-x: hidden">
  <div class="content-wrapper">
    <div class="calculator">
      <div class="header-logos">
        <svg class="logo" viewBox="0 0 200 100">
          <text x="10" y="60" fill="#C4161C" font-size="35" font-weight="bold"></text>
        </svg>
        <svg class="logo" viewBox="0 0 200 100">
          <text x="10" y="60" fill="#E30613" font-size="35" font-weight="bold"></text>
          <text x="10" y="80" fill="#E30613" font-size="20"></text>
        </svg>
      </div>

      <div class="input-group">
        <label for="category">Categor&#xed;a:</label>
        <select id="category" onchange="updateBaseSalary()">
          <option value>Selecciona una categor&#xed;a</option>
          <option value="A">Categor&#xed;a A</option>
          <option value="B">Categor&#xed;a B</option>
          <option value="C">Categor&#xed;a C</option>
        </select>
      </div>

      <div class="input-group">
        <label for="daysInMonth">D&#xed;as del mes:</label>
        <select id="daysInMonth" onchange="updateBaseSalary()">
          <option value="28">28 d&#xed;as (Febrero)</option>
          <option value="30">30 d&#xed;as</option>
          <option value="31">31 d&#xed;as</option>
        </select>
      </div>

      <div class="input-group">
        <label for="workingDays">D&#xed;as laborables:</label>
        <input type="number" id="workingDays" placeholder="Introduce los d&#xed;as laborables" min="16" max="23" value="22">
      </div>

      <div class="input-group">
        <label for="baseSalary">Salario Base:</label>
        <input type="number" id="baseSalary" readonly>
      </div>

      <div class="input-group">
        <label>Plus Convenio:</label>
        <input type="number" id="convenioPlus" readonly>
      </div>

      <div class="input-group">
        <label for="adPersonam2Rate">Ad-Personam II:</label>
        <input type="number" id="adPersonam2Rate" placeholder="Introduce precio unitario" step="0.01">
      </div>

      <div class="input-group">
        <label for="voluntaryRate">Complemento Voluntario:</label>
        <input type="number" id="voluntaryRate" placeholder="Introduce precio unitario" step="0.01">
      </div>

      <div class="input-group">
        <label for="hasAdPersonamPV">Plus Ad-Personam PV</label>
        <select id="hasAdPersonamPV">
          <option value="no">No</option>
          <option value="yes">S&#xed;</option>
        </select>
      </div>

      <div class="input-group">
        <label for="hasCoordinationPlus">Plus Funcional Coordinaci&#xf3;n</label>
        <select id="hasCoordinationPlus">
          <option value="no">No</option>
          <option value="yes">S&#xed;</option>
        </select>
      </div>

      <div class="input-group">
        <label for="hasDFestivo4Turno">Plus D-Festivo 4&#xba;Turno</label>
        <select id="hasDFestivo4Turno">
          <option value="no">No</option>
          <option value="yes">S&#xed;</option>
        </select>
      </div>

      <div class="input-group">
        <label for="hasDisabledAid">Ayuda disminuidos/as</label>
        <select id="hasDisabledAid">
          <option value="no">No</option>
          <option value="yes">S&#xed;</option>
        </select>
      </div>

      <div class="input-group">
        <label for="jornadaEspecial">Tipo Jornada Especial:</label>
        <select id="jornadaEspecial">
          <option value="none">Ninguna</option>
          <option value="A1">A1</option>
          <option value="A2">A2</option>
          <option value="B">B</option>
        </select>
      </div>

      <div class="input-group">
        <label for="estructuralDays">D&#xed;as Flexibilidad Estructural:</label>
        <input type="number" id="estructuralDays" placeholder="Introduce n&#xfa;mero de d&#xed;as" min="0" value="0">
      </div>

      <div class="input-group">
        <label for="urgenteDays">D&#xed;as Flexibilidad Urgente:</label>
        <input type="number" id="urgenteDays" placeholder="Introduce n&#xfa;mero de d&#xed;as" min="0" value="0">
      </div>

      <div class="input-group">
        <label for="coyunturalDays">D&#xed;as Flexibilidad Coyuntural:</label>
        <input type="number" id="coyunturalDays" placeholder="Introduce n&#xfa;mero de d&#xed;as" min="0" value="0">
      </div>

      <div class="input-group">
        <label for="festivityDays">D&#xed;as festivos trabajados:</label>
        <input type="number" id="festivityDays" placeholder="Introduce los d&#xed;as festivos trabajados" min="0" value="0">
      </div>

      <div class="input-group">
        <label for="weekendHours">Horas trabajadas en s&#xe1;bados y domingos:</label>
        <input type="number" id="weekendHours" placeholder="Introduce las horas de fin de semana" min="0" value="0">
      </div>

      <div class="input-group">
        <label for="nightHours">Horas Nocturnas:</label>
        <input type="number" id="nightHours" placeholder="Introduce n&#xfa;mero de horas nocturnas">
      </div>

      <div class="input-group">
        <label for="overtimeHours">Horas Extras:</label>
        <input type="number" id="overtimeHours" placeholder="Introduce n&#xfa;mero de horas extras">
      </div>

      <div class="input-group">
        <label for="formationHours">Horas Formaci&#xf3;n:</label>
        <input type="number" id="formationHours" placeholder="Introduce n&#xfa;mero de horas formaci&#xf3;n">
      </div>

      <div class="input-group">
        <label for="irpf">Porcentaje IRPF (%):</label>
        <input type="number" id="irpf" placeholder="Introduce el porcentaje de IRPF" step="0.01">
      </div>

      <div class="input-group">
        <label for="bocadilloDays">D&#xed;as Plus bocadillo en Puesto:</label>
        <input type="number" id="bocadilloDays" placeholder="Introduce n&#xfa;mero de d&#xed;as" min="0" value="0">
      </div>

      <div class="input-group">
        <label for="hasExtraPay">Paga Extra Verano/Invierno</label>
        <select id="hasExtraPay">
          <option value="no">No</option>
          <option value="yes">S&#xed;</option>
        </select>
      </div>

      <div class="input-group">
        <label for="avisosHours">Horas de Avisos:</label>
        <input type="number" id="avisosHours" placeholder="Introduce n&#xfa;mero de horas" min="0" value="0">
      </div>

      <div class="input-group">
        <label for="preAvisoDays">D&#xed;as Pre-Aviso 4&#xba;Turno:</label>
        <input type="number" id="preAvisoDays" placeholder="Introduce n&#xfa;mero de d&#xed;as" min="0" max="5" value="0">
      </div>

      <div class="input-group">
        <label for="desactivacionFestivoDays">D&#xed;as Plus Desactivaci&#xf3;n festivo:</label>
        <input type="number" id="desactivacionFestivoDays" placeholder="Introduce n&#xfa;mero de d&#xed;as" min="0" max="5" value="0">
      </div>

      <div class="input-group">
        <label for="hasPlusAdelantoTurno">Plus Adelanto Turno + &#xda;ltima Hora</label>
        <select id="hasPlusAdelantoTurno">
          <option value="no">No</option>
          <option value="yes">S&#xed;</option>
        </select>
        <small style="display: block; margin-top: 5px; color: #666;">* Un plus Adelanto Turno equivale a una jornada especial B</small>
      </div>

      <button onclick="calculateSalary()">Calcular Salario</button>

      <div class="result" id="result">
        <h2>Resultado</h2>
        <div class="breakdown" id="breakdown"></div>
      </div>
    </div>
    <div class="calendar" id="calendar"></div>
    <div class="link-section">
      <p>Documentos importantes:</p>
      <div class="link-wrapper">
        <a href="https://drive.google.com/file/d/1RS3zRXdmAYNI4ZVDWmA_bJoRnElF650W/view?usp=drive_link">Ver Convenio</a>
        <a href="https://autonomica.fsc.ccoo.es/noticia:668954--Analizamos_los_nuevos_permisos_y_medidas_de_conciliacion_y_su_aplicacion_al_personal_de_la_Junta&opc_id=9e5b373957cf119b744a589fd4ee96e6">Permisos no retribuidos </a>
        <a href="Calendario cerveza.pdf">Calendario Cerveza</a>
        <p>VACACIONES 2.025</p>
        <a href="Vacaciones Calidad.pdf">Vacaciones Calidad 2025</a> 
        <a href="Vacaciones Logistica.pdf">Vacaciones Logística 2025</a> 
        <a href="Vacaciones Cerveceria.pdf">Vacaciones Elaboración 2025</a> 
        <a href="VACACIONES MTO2025.pdf">Vacaciones Mantenimiento 2025</a> 
        <a href="Vacaciones Envasado 2.025.pdf">Vacaciones Envasado 2025</a>
      </div>
    </div>
  </div>

<script>
const CATEGORY_SALARIES = {
  'A': 1399.816944,
  'B': 1517.14682,
  'C': 1691.178836
};
const DAMM_PLUS = {
  'A': 55.5558,
  'B': 66.6658,
  'C': 91.0825
};
const NIGHT_HOUR_RATE = 3.8944;
const OVERTIME_HOUR_RATE = 19.629;
const FESTIVITY_DAY_RATE = 297.838;
const WEEKEND_HOUR_RATE = 12.7510;
const UNION_FEE = 15;
const AD_PERSONAM_PV_RATE = 65.0919;
const COORDINATION_PLUS = 234.195213;
const ESTRUCTURAL_RATE = 69.846007;
const URGENTE_RATE = 76.830628;
const COYUNTURAL_RATE = 73.3383175;
const D_FESTIVO_4TURNO_RATE = 102.007695;
const JORNADA_ESPECIAL_RATES = {
  'A1': 214.0172216,
  'A2': 236.56605,
  'B': 32.00011876
};
const FORMATION_HOUR_RATE = 10.66671;
const DISABLED_AID_RATE = 249.630724;
const BOCADILLO_RATE = 10.81644133;
const AVISOS_RATE = 29.75833758;
const PRE_AVISO_RATE = 33.20300714;
const PLUS_ADELANTO_TURNO_RATE = 61.44458957;
const PLUS_DESACTIVACION_FESTIVO_RATE = 11.06766905;
let currentDate = new Date(2025, 0, 1);
const HOLIDAYS_2025 = [new Date(2025, 0, 1), new Date(2025, 0, 6), new Date(2025, 2, 19), new Date(2025, 3, 18), new Date(2025, 3, 21), new Date(2025, 4, 1), new Date(2025, 7, 15), new Date(2025, 9, 9), new Date(2025, 9, 12), new Date(2025, 10, 1), new Date(2025, 11, 6), new Date(2025, 11, 8), new Date(2025, 11, 25)];
const MONTH_WORKDAYS = {
  0: {
    days: 21,
    hours: 168
  },
  1: {
    days: 20,
    hours: 160
  },
  2: {
    days: 19,
    hours: 152
  },
  3: {
    days: 20,
    hours: 160
  },
  4: {
    days: 21,
    hours: 168
  },
  5: {
    days: 21,
    hours: 168
  },
  6: {
    days: 23,
    hours: 184
  },
  7: {
    days: 19,
    hours: 152
  },
  8: {
    days: 21,
    hours: 168
  },
  9: {
    days: 21,
    hours: 168
  },
  10: {
    days: 20,
    hours: 160
  },
  11: {
    days: 19,
    hours: 152
  }
};
let yearlyTotalDays = 0;
function calculateConvenioPlus(workingDays, category) {
  const rates = {
    'A': 0,
    'B': 13.4183824,
    'C': 14.5428571
  };
  return rates[category] * workingDays;
}
function updateBaseSalary() {
  const category = document.getElementById('category').value;
  const daysInMonth = parseInt(document.getElementById('daysInMonth').value) || 30;
  const workingDays = parseInt(document.getElementById('workingDays').value) || 22;
  const baseSalaryInput = document.getElementById('baseSalary');
  const convenioPlusInput = document.getElementById('convenioPlus');
  if (category) {
    baseSalaryInput.value = calculateBaseSalaryForDays(category, daysInMonth).toFixed(2);
    convenioPlusInput.value = calculateConvenioPlus(workingDays, category).toFixed(2);
  } else {
    baseSalaryInput.value = '';
    convenioPlusInput.value = '';
  }
}
function calculateBaseSalaryForDays(category, daysInMonth) {
  if (category === 'A' && daysInMonth === 28) {
    return 1264.35079;
  }
  if (category === 'B' && daysInMonth === 28) {
    return 1370.32616;
  }
  if (category === 'C' && daysInMonth === 28) {
    return 1527.516368;
  }
  if (category === 'C' && daysInMonth === 30) {
    return 1636.62468;
  }
  if (category === 'B' && daysInMonth === 30) {
    return 1468.2066;
  }
  if (category === 'B' && daysInMonth === 31) {
    return 1517.14682;
  }
  if (category === 'A' && daysInMonth === 31) {
    return 1399.81694;
  }
  if (category === 'A' && daysInMonth === 30) {
    return 1354.66156;
  }
  return CATEGORY_SALARIES[category];
}
function calculateSalary() {
  const category = document.getElementById('category').value;
  if (!category) {
    alert('Por favor, selecciona una categoría');
    return;
  }
  const daysInMonth = parseInt(document.getElementById('daysInMonth').value) || 30;
  const baseSalary = calculateBaseSalaryForDays(category, daysInMonth);
  const nightHours = parseFloat(document.getElementById('nightHours').value) || 0;
  const overtimeHours = parseFloat(document.getElementById('overtimeHours').value) || 0;
  const formationHours = parseFloat(document.getElementById('formationHours').value) || 0;
  const weekendHours = parseFloat(document.getElementById('weekendHours').value) || 0;
  const workingDays = parseInt(document.getElementById('workingDays').value) || 22;
  const convenioPlus = calculateConvenioPlus(workingDays, category);
  const festivityDays = parseInt(document.getElementById('festivityDays').value) || 0;
  const hasAdPersonamPV = document.getElementById('hasAdPersonamPV').value === 'yes';
  const dammPlus = DAMM_PLUS[category];
  const nightShift = nightHours * NIGHT_HOUR_RATE;
  const overtime = overtimeHours * OVERTIME_HOUR_RATE;
  const formationPay = formationHours * FORMATION_HOUR_RATE;
  const weekendPay = weekendHours * WEEKEND_HOUR_RATE;
  const adPersonamPV = hasAdPersonamPV ? AD_PERSONAM_PV_RATE : 0;
  const adPersonam2Rate = parseFloat(document.getElementById('adPersonam2Rate').value) || 0;
  const adPersonam2 = adPersonam2Rate * daysInMonth;
  const festivityPay = festivityDays * FESTIVITY_DAY_RATE;
  const hasCoordinationPlus = document.getElementById('hasCoordinationPlus').value === 'yes';
  const coordinationPlus = hasCoordinationPlus ? COORDINATION_PLUS : 0;
  const irpfPercentage = parseFloat(document.getElementById('irpf').value || 0).toFixed(2);
  const estructuralDays = parseInt(document.getElementById('estructuralDays').value) || 0;
  const urgenteDays = parseInt(document.getElementById('urgenteDays').value) || 0;
  const coyunturalDays = parseInt(document.getElementById('coyunturalDays').value) || 0;
  const estructuralPay = estructuralDays * ESTRUCTURAL_RATE;
  const urgentePay = urgenteDays * URGENTE_RATE;
  const coyunturalPay = coyunturalDays * COYUNTURAL_RATE;
  const hasDFestivo4Turno = document.getElementById('hasDFestivo4Turno').value === 'yes';
  const dFestivo4TurnoPay = hasDFestivo4Turno ? D_FESTIVO_4TURNO_RATE : 0;
  const jornadaEspecialType = document.getElementById('jornadaEspecial').value;
  const jornadaEspecialPay = jornadaEspecialType !== 'none' ? JORNADA_ESPECIAL_RATES[jornadaEspecialType] : 0;
  const hasDisabledAid = document.getElementById('hasDisabledAid').value === 'yes';
  const disabledAidPay = hasDisabledAid ? DISABLED_AID_RATE : 0;
  const bocadilloDays = parseInt(document.getElementById('bocadilloDays').value) || 0;
  const bocadilloPay = bocadilloDays * BOCADILLO_RATE;
  const hasExtraPay = document.getElementById('hasExtraPay').value === 'yes';
  const extraPay = hasExtraPay ? baseSalary + adPersonam2 + adPersonamPV : 0;
  const voluntaryRate = parseFloat(document.getElementById('voluntaryRate').value) || 0;
  const voluntaryPay = voluntaryRate * daysInMonth;
  const avisosHours = parseFloat(document.getElementById('avisosHours').value) || 0;
  const avisosPay = avisosHours * AVISOS_RATE;
  const preAvisoDays = Math.min(5, parseInt(document.getElementById('preAvisoDays').value) || 0);
  const preAvisoPay = preAvisoDays * PRE_AVISO_RATE;
  const hasPlusAdelantoTurno = document.getElementById('hasPlusAdelantoTurno').value === 'yes';
  const plusAdelantoTurnoPay = hasPlusAdelantoTurno ? PLUS_ADELANTO_TURNO_RATE : 0;
  const desactivacionFestivoDays = Math.min(5, parseInt(document.getElementById('desactivacionFestivoDays').value) || 0);
  const desactivacionFestivoPay = desactivacionFestivoDays * PLUS_DESACTIVACION_FESTIVO_RATE;
  const grossSalary = baseSalary + nightShift + overtime + formationPay + weekendPay + adPersonamPV + dammPlus + festivityPay + adPersonam2 + coordinationPlus + estructuralPay + urgentePay + coyunturalPay + dFestivo4TurnoPay + jornadaEspecialPay + disabledAidPay + bocadilloPay + extraPay + voluntaryPay + convenioPlus + avisosPay + preAvisoPay + plusAdelantoTurnoPay + desactivacionFestivoPay;
  const irpfDeduction = grossSalary * irpfPercentage / 100;
  const netSalary = grossSalary - irpfDeduction - UNION_FEE;
  const breakdown = document.getElementById('breakdown');
  breakdown.innerHTML = `
        <p><strong>Categoría:</strong> ${category}</p>
        <p><strong>Días del mes:</strong> ${daysInMonth}</p>
        <p><strong>Días laborables:</strong> ${workingDays}</p>
        <p><strong>Días festivos trabajados:</strong> ${festivityDays} días (${festivityPay.toFixed(2)}€)</p>
        <p><strong>Horas fin de semana:</strong> ${weekendHours} horas (${weekendPay.toFixed(2)}€)</p>
        <p><strong>Salario Base:</strong> ${baseSalary.toFixed(2)}€</p>
        <p><strong>Plus Convenio:</strong> ${convenioPlus.toFixed(2)}€</p>
        <p><strong>Plus DAMM:</strong> ${dammPlus.toFixed(2)}€</p>
        <p><strong>Plus Ad-Personam PV:</strong> ${adPersonamPV.toFixed(2)}€</p>
        <p><strong>Plus Ad-Personam 2:</strong> ${adPersonam2.toFixed(2)}€</p>
        <p><strong>Plus Funcional Coordinación:</strong> ${coordinationPlus.toFixed(2)}€</p>
        <p><strong>Flexibilidad Estructural:</strong> ${estructuralDays} días (${estructuralPay.toFixed(2)}€)</p>
        <p><strong>Flexibilidad Urgente:</strong> ${urgenteDays} días (${urgentePay.toFixed(2)}€)</p>
        <p><strong>Flexibilidad Coyuntural:</strong> ${coyunturalDays} días (${coyunturalPay.toFixed(2)}€)</p>
        <p><strong>Horas Nocturnas:</strong> ${nightHours} horas (${nightShift.toFixed(2)}€)</p>
        <p><strong>Horas Extras:</strong> ${overtimeHours} horas (${overtime.toFixed(2)}€)</p>
        <p><strong>Horas Formación:</strong> ${formationHours} horas (${formationPay.toFixed(2)}€)</p>
        <p><strong>Horas de Avisos:</strong> ${avisosHours} horas (${avisosPay.toFixed(2)}€)</p>
        <p><strong>Pre-Aviso 4ºTurno:</strong> ${preAvisoDays} días (${preAvisoPay.toFixed(2)}€)</p>
        <p><strong>Plus D-Festivo 4ºTurno:</strong> ${dFestivo4TurnoPay.toFixed(2)}€</p>
        <p><strong>Jornada Especial (${jornadaEspecialType}):</strong> ${jornadaEspecialPay.toFixed(2)}€</p>
        <p><strong>Ayuda disminuid@s:</strong> ${disabledAidPay.toFixed(2)}€</p>
        <p><strong>Plus bocadillo en Puesto:</strong> ${bocadilloPay.toFixed(2)}€</p>
        <p><strong>Paga Extra Verano/Invierno:</strong> ${extraPay.toFixed(2)}€</p>
        <p><strong>Complemento Voluntario:</strong> ${voluntaryPay.toFixed(2)}€</p>
        <p><strong>Plus Adelanto Turno + Última Hora:</strong> ${plusAdelantoTurnoPay.toFixed(2)}€</p>
        <p><small>* Un plus Adelanto Turno equivale a una jornada especial B</small></p>
        <p><strong>Plus Desactivación festivo:</strong> ${desactivacionFestivoDays} días (${desactivacionFestivoPay.toFixed(2)}€)</p>
        <p><strong>Salario Bruto:</strong> ${grossSalary.toFixed(2)}€</p>
        <p><strong>Deducción IRPF (${irpfPercentage}%):</strong> ${irpfDeduction.toFixed(2)}€</p>
        <p><strong>Cuota Sindical:</strong> ${UNION_FEE.toFixed(2)}€</p>
        <p class="total-to-receive"><strong>TOTAL A COBRAR:</strong> ${netSalary.toFixed(2)}€</p>
    `;
}
function renderCalendar() {
  const calendarDiv = document.getElementById('calendar');
  if (!calendarDiv) {
    return;
  }
  const year = currentDate.getFullYear();
  const month = currentDate.getMonth();
  const firstDay = new Date(year, month, 1);
  const lastDay = new Date(year, month + 1, 0);
  let firstDayIndex = firstDay.getDay() || 7;
  firstDayIndex = firstDayIndex - 1;
  calendarDiv.innerHTML = `
    <div class="calendar-header">
      <button class="calendar-nav" onclick="previousMonth()">&lt;</button>
      <h2>${currentDate.toLocaleString('default', {
    month: 'long',
    year: 'numeric'
  })}</h2>
      <button class="calendar-nav" onclick="nextMonth()">&gt;</button>
    </div>
    <div class="calendar-grid">
      <div class="calendar-weekday">Lun</div>
      <div class="calendar-weekday">Mar</div>
      <div class="calendar-weekday">Mié</div>
      <div class="calendar-weekday">Jue</div>
      <div class="calendar-weekday">Vie</div>
      <div class="calendar-weekday">Sáb</div>
      <div class="calendar-weekday">Dom</div>
      ${Array(firstDayIndex).fill().map(() => `<div></div>`).join('')}
      ${Array(lastDay.getDate()).fill().map((_, i) => createDayElement(i + 1, month, year)).join('')}
    </div>
    <div class="calendar-footer">
      Días laborables: ${MONTH_WORKDAYS[month].days} días (${MONTH_WORKDAYS[month].hours} horas)
    </div>
    <button onclick="saveShifts()" style="margin-top: 1rem">Guardar Turnos</button>
    <div>
    </div>
  `;
  calendarDiv.innerHTML += `
    <div class="calendar-stats" style="margin-top: 1rem; padding: 1rem; background: #fff; border-radius: 5px;">
      <h3>Estadísticas del mes:</h3>
      <p>Turnos de mañana: <span id="morning-count">0</span></p>
      <p>Turnos de tarde: <span id="afternoon-count">0</span></p>  
      <p>Turnos de noche: <span id="night-count">0</span></p>
      <p>Adelanto turnos: <span id="early-count">0</span></p>
      <p><strong>Total días trabajados: <span id="total-worked">0</span></strong></p>
    </div>
  `;
  loadShifts();
  updateShiftCounts();
}
function createDayElement(day, month, year) {
  const date = new Date(year, month, day);
  const isWeekend = date.getDay() === 0 || date.getDay() === 6;
  const isHoliday = HOLIDAYS_2025?.some(h => h.getDate() === date.getDate() && h.getMonth() === date.getMonth() && h.getFullYear() === date.getFullYear());
  const isSpecialDay = month === 11 && (day === 24 || day === 31) || month === 1 && day === 18 || month === 2 && day === 18;
  const isOctoberSpecial = month === 9 && day === 17;
  const isSeptemberEight = month === 8 && day === 8;
  const isAugustSpecial = month === 7 && day === 14;
  const isFebruarySpecial = month === 1 && day === 18;
  const isOctoberPink = month === 9 && day === 12;
  const isNovemberPink = month === 10 && day === 1;
  const isDecemberPink = month === 11 && day === 6;
  const classes = ['calendar-day'];
  if (isWeekend) classes.push('weekend');
  if (isHoliday) classes.push('holiday');
  if (isSpecialDay) classes.push('special-day');
  if (isOctoberSpecial) classes.push('october-special');
  if (isSeptemberEight) classes.push('september-eight');
  if (isAugustSpecial) classes.push('september-eight');
  if (isFebruarySpecial) classes.push('february-special');
  if (isOctoberPink || isNovemberPink || isDecemberPink) classes.push('special-pink');
  return `
    <div class="${classes.join(' ')}">
      <div class="day-number">${day}</div>
      <select class="shift-select" data-date="${date.toISOString()}">
        <option value="">-</option>  
        <option value="M">Mañana</option>
        <option value="T">Tarde</option>
        <option value="N">Noche</option>
        <option value="A">Adelanto turno</option>
        <option value="D">Descanso</option>
      </select>
    </div>
  `;
}
function previousMonth() {
  currentDate.setMonth(currentDate.getMonth() - 1);
  renderCalendar();
}
function nextMonth() {
  if (currentDate.getMonth() === 11) {
    yearlyTotalDays = 0;
  }
  currentDate.setMonth(currentDate.getMonth() + 1);
  renderCalendar();
}
function saveShifts() {
  const shifts = {};
  document.querySelectorAll('.shift-select').forEach(select => {
    if (select.value) {
      shifts[select.dataset.date] = select.value;
    }
  });
  localStorage.setItem('calendar_shifts_2025', JSON.stringify(shifts));
  updateShiftCounts();
  alert('Turnos guardados correctamente');
}
function loadShifts() {
  const shifts = JSON.parse(localStorage.getItem('calendar_shifts_2025') || '{}');
  document.querySelectorAll('.shift-select').forEach(select => {
    const date = select.dataset.date;
    if (shifts[date]) {
      select.value = shifts[date];
    }
  });
  updateShiftCounts();
}
function updateShiftCounts() {
  const shifts = document.querySelectorAll('.shift-select');
  let morning = 0,
    afternoon = 0,
    night = 0,
    early = 0;
  shifts.forEach(shift => {
    switch (shift.value) {
      case 'M':
        morning++;
        break;
      case 'T':
        afternoon++;
        break;
      case 'N':
        night++;
        break;
      case 'A':
        early++;
        break;
    }
  });
  const totalWorked = morning + afternoon + night + early;
  if (currentDate.getMonth() === 11) {
    yearlyTotalDays += totalWorked;
  }
  document.getElementById('morning-count').textContent = morning;
  document.getElementById('afternoon-count').textContent = afternoon;
  document.getElementById('night-count').textContent = night;
  document.getElementById('early-count').textContent = early;
  document.getElementById('total-worked').textContent = totalWorked;

  if (currentDate.getMonth() === 11) {
    document.getElementById('total-worked').textContent = `${totalWorked} (Total anual: ${yearlyTotalDays})`;
  }
}
document.addEventListener('DOMContentLoaded', function () {
  updateBaseSalary();
  renderCalendar();
});
document.addEventListener('change', e => {
  if (e.target.classList.contains('shift-select')) {
    updateShiftCounts();
  }
});
</script>
</body></html>
